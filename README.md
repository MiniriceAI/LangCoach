# LangCoach

<div align="center">

[![License: Apache 2.0](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)
[![Python 3.10](https://img.shields.io/badge/python-3.10-blue.svg)](https://www.python.org/downloads/)
[![LangChain](https://img.shields.io/badge/LangChain-0.2-blue.svg)](https://www.langchain.com/)
[![Gradio](https://img.shields.io/badge/Gradio-4.44+-green.svg)](https://gradio.app/)

**ğŸ¤– AI-Powered English Learning Platform | AI é©±åŠ¨çš„è‹±è¯­å­¦ä¹ å¹³å°**

*Practice English conversation through scenario-based dialogues with intelligent memory*

*é€šè¿‡åœºæ™¯åŒ–å¯¹è¯å’Œæ™ºèƒ½è®°å¿†æå‡è‹±è¯­èƒ½åŠ›*

**ğŸ‰ Phase 2 å·²å®Œæˆï¼šé•¿æœŸè®°å¿†ç³»ç»Ÿ | Phase 2 Complete: Long-Term Memory System**

</div>

---

## ğŸ“– ç®€ä»‹ / Introduction

LangCoach æ˜¯ä¸€æ¬¾åŸºäºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„æ™ºèƒ½è‹±è¯­ç§æ•™ç³»ç»Ÿï¼Œé€šè¿‡åœºæ™¯åŒ–å¯¹è¯ç»ƒä¹ å’Œè¯æ±‡å­¦ä¹ ï¼Œå¸®åŠ©å­¦ä¹ è€…æå‡è‹±è¯­å£è¯­è¡¨è¾¾èƒ½åŠ›ã€‚ç³»ç»Ÿæ”¯æŒå¤šç§ LLM æä¾›è€…ï¼ˆDeepSeekã€OpenAIã€Ollamaï¼‰ï¼Œå¹¶æä¾›å‹å¥½çš„ Web ç•Œé¢ï¼Œè®©è‹±è¯­å­¦ä¹ å˜å¾—è½»æ¾æœ‰è¶£ã€‚

**Phase 2 æ–°å¢**ï¼šé›†æˆ Milvus å‘é‡æ•°æ®åº“ï¼Œå®ç°é•¿æœŸè®°å¿†åŠŸèƒ½ï¼Œè®© AI èƒ½å¤Ÿè®°ä½ä½ çš„å­¦ä¹ å†ç¨‹å¹¶æä¾›ä¸ªæ€§åŒ–å»ºè®®ã€‚

LangCoach is an AI-powered English learning platform that helps learners improve their English speaking skills through scenario-based dialogue practice and vocabulary learning. Supporting multiple LLM providers (DeepSeek, OpenAI, Ollama), it provides a user-friendly web interface for an engaging learning experience.

**Phase 2 Update**: Integrated Milvus vector database for long-term memory, enabling AI to remember your learning journey and provide personalized recommendations.

## âœ¨ æ ¸å¿ƒç‰¹æ€§ / Features

### ğŸ¯ åœºæ™¯åŒ–å¯¹è¯ç»ƒä¹  / Scenario-Based Practice
- **æ±‚èŒé¢è¯•** (Job Interview) - æ¨¡æ‹ŸçœŸå®é¢è¯•åœºæ™¯ï¼Œç»ƒä¹ è‡ªæˆ‘ä»‹ç»å’Œå›ç­”é¢è¯•é—®é¢˜
- **é…’åº—å…¥ä½** (Hotel Check-in) - ç»ƒä¹ é…’åº—é¢„è®¢ã€å…¥ä½ç™»è®°ç­‰å®ç”¨è‹±è¯­
- **ç§Ÿæˆ¿** (Renting) - å­¦ä¹ ç§Ÿæˆ¿å’¨è¯¢ã€ä»·æ ¼åå•†ç­‰ç”Ÿæ´»åœºæ™¯å¯¹è¯
- **è–ªèµ„è°ˆåˆ¤** (Salary Negotiation) - æŒæ¡èŒåœºè–ªèµ„è°ˆåˆ¤æŠ€å·§å’Œè¡¨è¾¾æ–¹å¼

### ğŸ“š è¯æ±‡å­¦ä¹  / Vocabulary Learning
- åŸºäºåœºæ™¯çš„è¯æ±‡æ•™å­¦
- äº’åŠ¨å¼è¯æ±‡ç»ƒä¹ 
- å®æ—¶åé¦ˆå’Œå­¦ä¹ å»ºè®®

### ğŸ§  é•¿æœŸè®°å¿†ç³»ç»Ÿ / Long-Term Memory (Phase 2 New!)
- **æ™ºèƒ½è®°å¿†** - ä½¿ç”¨ Milvus å‘é‡æ•°æ®åº“å­˜å‚¨å¯¹è¯å†å²
- **ä¸ªæ€§åŒ–å­¦ä¹ ** - AI åŸºäºä½ çš„å­¦ä¹ å†ç¨‹æä¾›å®šåˆ¶åŒ–å»ºè®®
- **è¯­ä¹‰æ£€ç´¢** - è‡ªåŠ¨æ£€ç´¢ç›¸å…³çš„å†å²å¯¹è¯ï¼Œå¼ºåŒ–å­¦ä¹ æ•ˆæœ
- **ä¸Šä¸‹æ–‡ç®¡ç†** - æ™ºèƒ½æ§åˆ¶è®°å¿†æ³¨å…¥é‡ï¼Œé¿å…è¶…å‡º LLM é™åˆ¶

### ğŸ¤– å¤š LLM æ”¯æŒ / Multi-LLM Support
- **DeepSeek** (ä¼˜å…ˆæ¨è) - é«˜æ€§ä»·æ¯”çš„ AI æ¨¡å‹
- **OpenAI** - GPT-4o-mini ç­‰æ¨¡å‹
- **Ollama** - æœ¬åœ°éƒ¨ç½²ï¼Œå®Œå…¨å…è´¹

### ğŸ’¡ æ™ºèƒ½å¯¹è¯ç‰¹æ€§ / Smart Features
- å®æ—¶å¯¹è¯æç¤ºï¼ˆä¸­è‹±åŒè¯­ï¼‰
- è‡ªåŠ¨çº é”™å’Œåé¦ˆ
- å­¦ä¹ è¿›åº¦è·Ÿè¸ª
- ä¼šè¯å†å²ç®¡ç†
- **Phase 2**: å¯é…ç½®çš„éš¾åº¦çº§åˆ«å’Œå¯¹è¯è½®æ¬¡

## ğŸ–¼ï¸ åŠŸèƒ½æ¼”ç¤º / Screenshots

### ğŸ“¹ è§†é¢‘ä»‹ç» / Video Demo

<div align="center">

**ç‚¹å‡»è§‚çœ‹å®Œæ•´æ¼”ç¤ºè§†é¢‘**

[![LangCoach Demo Video](https://img.youtube.com/vi/ntxbJ3Cagb8/maxresdefault.jpg)](https://youtu.be/ntxbJ3Cagb8)

</div>


### åœ¨çº¿ä½“éªŒ / Live Demo  
ç‚¹å‡»ä½“éªŒ: <a href="http://13.217.141.2:7860/" target="_blank">http://13.217.141.2:7860/</a>

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„ / Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Gradio Web UI                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Scenario Tab      â”‚    â”‚   Vocab Tab        â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Agent Layer (Phase 2 Enhanced)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ScenarioAgent â”‚  â”‚  VocabAgent  â”‚  â”‚  AgentBase   â”‚     â”‚
â”‚  â”‚  + Memory    â”‚  â”‚   + Memory   â”‚  â”‚  + Memory    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                 â”‚                 â”‚
          â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LangChain Layer â”‚  â”‚  Memory    â”‚  â”‚ OpenAI/Ollama   â”‚
â”‚   + History      â”‚  â”‚  Manager   â”‚  â”‚   Embeddings    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    Milvus     â”‚ (Phase 2 New!)
                    â”‚ Vector Store  â”‚
                    â”‚ (etcd + minio)â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LLM Factory                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   DeepSeek   â”‚  â”‚   OpenAI     â”‚  â”‚   Ollama     â”‚     â”‚
â”‚  â”‚   (ä¼˜å…ˆ)     â”‚  â”‚   (å¤‡é€‰)     â”‚  â”‚   (æœ¬åœ°)     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ / Tech Stack

- **å‰ç«¯æ¡†æ¶**: [Gradio](https://gradio.app/) - å¿«é€Ÿæ„å»ºæœºå™¨å­¦ä¹  Web åº”ç”¨
- **LLM æ¡†æ¶**: [LangChain](https://www.langchain.com/) - æ„å»º LLM åº”ç”¨çš„æ¡†æ¶
- **å‘é‡æ•°æ®åº“**: [Milvus](https://milvus.io/) - é«˜æ€§èƒ½å‘é‡ç›¸ä¼¼åº¦æœç´¢ (Phase 2 æ–°å¢)
- **Python ç‰ˆæœ¬**: 3.10+
- **éƒ¨ç½²æ–¹å¼**: Docker / Docker Compose

### æ ¸å¿ƒæ¨¡å— / Core Modules

- **Agent Layer** (`src/agents/`)
  - `AgentBase`: ä»£ç†åŸºç±»ï¼Œæä¾›é€šç”¨åŠŸèƒ½å’Œé•¿æœŸè®°å¿†æ”¯æŒ (Phase 2 å¢å¼º)
  - `ScenarioAgent`: åœºæ™¯å¯¹è¯ä»£ç†
  - `VocabAgent`: è¯æ±‡å­¦ä¹ ä»£ç†
  - `llm_factory.py`: LLM å·¥å‚ï¼Œç»Ÿä¸€ç®¡ç†å¤š LLM æä¾›è€…
  - `long_term_memory.py`: é•¿æœŸè®°å¿†ç®¡ç†å™¨ (Phase 2 æ–°å¢)
  - `conversation_config.py`: å¯¹è¯é…ç½®ç®¡ç† (Phase 1 æ–°å¢)

- **UI Layer** (`src/tabs/`)
  - `scenario_tab.py`: åœºæ™¯ç»ƒä¹ ç•Œé¢
  - `vocab_tab.py`: è¯æ±‡å­¦ä¹ ç•Œé¢

- **Utilities** (`src/utils/`)
  - `logger.py`: æ—¥å¿—ç®¡ç†å·¥å…·

## ğŸš€ å¿«é€Ÿå¼€å§‹ / Quick Start

### å‰ç½®è¦æ±‚ / Prerequisites

- Python 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬
- pip åŒ…ç®¡ç†å™¨
- ï¼ˆå¯é€‰ï¼‰Docker å’Œ Docker Composeï¼ˆç”¨äºå®¹å™¨åŒ–éƒ¨ç½²ï¼‰

### æ–¹å¼ä¸€ï¼šæœ¬åœ°å®‰è£… / Local Installation

#### 1. å…‹éš†ä»“åº“ / Clone Repository

```bash
git clone https://github.com/LangCoach/LangCoach.git
cd LangCoach
```

#### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ / Create Virtual Environment

ä½¿ç”¨ condaï¼ˆæ¨èï¼‰:
```bash
conda create -n lm python=3.10
conda activate lm
```

æˆ–ä½¿ç”¨ venv:
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\Scripts\activate  # Windows
```

#### 3. å®‰è£…ä¾èµ– / Install Dependencies

```bash
pip install -r requirements.txt
```

#### 4. é…ç½® LLM æä¾›è€… / Configure LLM Provider

**Phase 2.5 æ›´æ–°**ï¼šæ”¯æŒ Ollamaã€DeepSeekã€OpenAI ä¸‰ç§æä¾›è€…ï¼Œ**é»˜è®¤ä½¿ç”¨ Ollama + GLM-4-9B**ã€‚

**æ¨èé…ç½®æ–¹å¼ï¼šä½¿ç”¨ .env æ–‡ä»¶**

åº”ç”¨ä¼šè‡ªåŠ¨åŠ è½½é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `.env` æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤é…ç½®:

```bash
# 1. å¤åˆ¶ç¤ºä¾‹é…ç½®æ–‡ä»¶
cp .env.example .env

# 2. ç¼–è¾‘ .env æ–‡ä»¶ï¼Œæ ¹æ®éœ€è¦ä¿®æ”¹é…ç½®
# ä¾‹å¦‚ï¼šè®¾ç½® DeepSeek API Key
nano .env  # æˆ–ä½¿ç”¨æ‚¨å–œæ¬¢çš„ç¼–è¾‘å™¨

# 3. æµ‹è¯•é…ç½®æ˜¯å¦æ­£ç¡®åŠ è½½
python test_env_loading.py
```

**æ–¹å¼ 1: ä½¿ç”¨ Ollamaï¼ˆæ¨è - å…è´¹æœ¬åœ°è¿è¡Œï¼‰**:

> **âš ï¸ é‡è¦æç¤º**ï¼šOllama æœåŠ¡éœ€è¦**æ‰‹åŠ¨å¯åŠ¨**ï¼ŒLangCoach ä¸ä¼šè‡ªåŠ¨å¯åŠ¨ Ollama æœåŠ¡ã€‚

```bash
# 1. å®‰è£… Ollama
# è®¿é—® https://ollama.com ä¸‹è½½å®‰è£…

# 2. å¯åŠ¨ Ollama æœåŠ¡ï¼ˆå¿…éœ€æ­¥éª¤ï¼‰
# æ–¹å¼ A: å‰å°è¿è¡Œï¼ˆä¼šå ç”¨ç»ˆç«¯ï¼‰
ollama serve

# æ–¹å¼ B: åå°è¿è¡Œï¼ˆæ¨èï¼‰
ollama serve &
# æˆ–è€…ä½¿ç”¨ nohup
nohup ollama serve > /dev/null 2>&1 &

# æ–¹å¼ C: ä½¿ç”¨ systemdï¼ˆLinuxï¼Œå¼€æœºè‡ªå¯ï¼‰
# åˆ›å»ºæœåŠ¡æ–‡ä»¶: /etc/systemd/system/ollama.service
# ç„¶å: systemctl enable ollama && systemctl start ollama

# 3. éªŒè¯æœåŠ¡æ˜¯å¦è¿è¡Œ
curl http://localhost:11434/api/tags
# æˆ–è€…
ollama list

# 4. æ‹‰å– GLM-4-9B æ¨¡å‹ï¼ˆé»˜è®¤æ¨¡å‹ï¼‰
ollama pull unsloth/GLM-4-9B-0414-GGUF:Q8_K_XL

# 5. éªŒè¯æ¨¡å‹å·²å®‰è£…
ollama list

# 6. å¯é€‰ï¼šé…ç½®ç¯å¢ƒå˜é‡ï¼ˆä½¿ç”¨é»˜è®¤å€¼å¯è·³è¿‡ï¼‰
export OLLAMA_BASE_URL=http://localhost:11434
export OLLAMA_MODEL=unsloth/GLM-4-9B-0414-GGUF:Q8_K_XL
```

**å¸¸è§é—®é¢˜æ’æŸ¥**ï¼š
- å¦‚æœå¯åŠ¨ LangCoach æ—¶æç¤ºæ— æ³•è¿æ¥ Ollamaï¼Œè¯·æ£€æŸ¥ï¼š
  1. Ollama æœåŠ¡æ˜¯å¦æ­£åœ¨è¿è¡Œï¼š`curl http://localhost:11434/api/tags`
  2. æ¨¡å‹æ˜¯å¦å·²å®‰è£…ï¼š`ollama list`
  3. å¦‚æœä½¿ç”¨ Dockerï¼Œç¡®ä¿ Ollama è¿è¡Œåœ¨å®¿ä¸»æœºæˆ–é…ç½®æ­£ç¡®çš„ `OLLAMA_BASE_URL`

**æ–¹å¼ 2: ä½¿ç”¨ DeepSeekï¼ˆé«˜æ€§ä»·æ¯” APIï¼‰**:
```bash
export DEEPSEEK_API_KEY=your_deepseek_api_key
# å¯é€‰é…ç½®
export DEEPSEEK_MODEL=deepseek-chat  # é»˜è®¤å€¼
```

**æ–¹å¼ 3: ä½¿ç”¨ OpenAIï¼ˆé«˜æ€§èƒ½ï¼‰**:
```bash
export OPENAI_API_KEY=your_openai_api_key
# å¯é€‰é…ç½®
export OPENAI_MODEL=gpt-4o-mini  # é»˜è®¤å€¼
```

**é«˜çº§é…ç½® - è‡ªå®šä¹‰ä¼˜å…ˆçº§**:
```bash
# é»˜è®¤ä¼˜å…ˆçº§: ollama > deepseek > openai
# å¯ä»¥è‡ªå®šä¹‰ä¼˜å…ˆçº§é¡ºåº
export LLM_PROVIDER_PRIORITY=deepseek,openai,ollama

# ç¦ç”¨æŸä¸ªæä¾›è€…
export OLLAMA_ENABLED=false
```

> **ğŸ’¡ æç¤º**:
> - **æ¨èä½¿ç”¨ `.env` æ–‡ä»¶ç®¡ç†é…ç½®** - åº”ç”¨ä¼šè‡ªåŠ¨åŠ è½½,æ— éœ€æ‰‹åŠ¨ export
> - ç¯å¢ƒå˜é‡ä¼˜å…ˆçº§: ç³»ç»Ÿç¯å¢ƒå˜é‡ > `.env` æ–‡ä»¶
> - Ollama æ˜¯é»˜è®¤æä¾›è€…ï¼Œæ— éœ€ API keyï¼Œå®Œå…¨å…è´¹
> - å¦‚æœæœªé…ç½®ä»»ä½•æä¾›è€…ï¼Œç³»ç»Ÿä¼šå°è¯•è¿æ¥æœ¬åœ° Ollama
> - è¯¦ç»†é…ç½®è¯·å‚è€ƒ `.env.example` æ–‡ä»¶
> - è¿è¡Œ `python test_env_loading.py` éªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®åŠ è½½

#### 5. è¿è¡Œåº”ç”¨ / Run Application

```bash
python src/main.py
```

åº”ç”¨å¯åŠ¨åï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—® `http://localhost:8300` å¼€å§‹ä½¿ç”¨ã€‚

> **æ³¨æ„**: Phase 2 é»˜è®¤ç«¯å£å·²ä» 7860 æ”¹ä¸º 8300ã€‚

**é«˜çº§å¯åŠ¨é€‰é¡¹ / Advanced Options**:

```bash
# æŒ‡å®šç«¯å£
python src/main.py 7861

# å¼ºåˆ¶é‡å¯ï¼ˆè‡ªåŠ¨åœæ­¢å ç”¨ç«¯å£çš„æ—§è¿›ç¨‹ï¼‰
python src/main.py --force

# æŒ‡å®šç«¯å£å¹¶å¼ºåˆ¶é‡å¯
python src/main.py 7861 --force

# ä½¿ç”¨ç¯å¢ƒå˜é‡é…ç½®
GRADIO_PORT=7861 python src/main.py
GRADIO_FORCE_RESTART=true python src/main.py
```

### æ–¹å¼äºŒï¼šDocker éƒ¨ç½² / Docker Deployment

#### ä½¿ç”¨ Docker Composeï¼ˆæ¨èï¼‰

1. **è®¾ç½®ç¯å¢ƒå˜é‡**:
```bash
export DEEPSEEK_API_KEY=your_api_key
# æˆ–åˆ›å»º .env æ–‡ä»¶
echo "DEEPSEEK_API_KEY=your_api_key" > .env
```

2. **å¯åŠ¨æœåŠ¡**:
```bash
docker-compose up -d
```

3. **æŸ¥çœ‹æ—¥å¿—**:
```bash
docker-compose logs -f
```

4. **åœæ­¢æœåŠ¡**:
```bash
docker-compose down
```

è¯¦ç»†çš„ Docker éƒ¨ç½²æŒ‡å—è¯·å‚è€ƒ [DOCKER.md](DOCKER.md)ã€‚

## âš™ï¸ é…ç½®è¯´æ˜ / Configuration

### ç¯å¢ƒå˜é‡ / Environment Variables

| å˜é‡å | è¯´æ˜ | å¿…éœ€ | é»˜è®¤å€¼ |
|--------|------|------|--------|
| **LLM é…ç½® (Phase 2.5 å¢å¼º)** |
| `LLM_PROVIDER_PRIORITY` | æä¾›è€…ä¼˜å…ˆçº§ï¼ˆé€—å·åˆ†éš”ï¼‰ | å¦ | ollama,deepseek,openai |
| **Ollama é…ç½®ï¼ˆé»˜è®¤æä¾›è€…ï¼‰** |
| `OLLAMA_MODEL` | Ollama æ¨¡å‹åç§° | å¦ | unsloth/GLM-4-9B-0414-GGUF:Q8_K_XL |
| `OLLAMA_BASE_URL` | Ollama æœåŠ¡åœ°å€ | å¦ | http://localhost:11434 |
| `OLLAMA_TEMPERATURE` | æ¸©åº¦å‚æ•° | å¦ | 0.8 |
| `OLLAMA_MAX_TOKENS` | æœ€å¤§ token æ•° | å¦ | 8192 |
| `OLLAMA_ENABLED` | æ˜¯å¦å¯ç”¨ | å¦ | true |
| **DeepSeek é…ç½®** |
| `DEEPSEEK_API_KEY` | DeepSeek API å¯†é’¥ | å¦* | - |
| `DEEPSEEK_MODEL` | æ¨¡å‹åç§° | å¦ | deepseek-chat |
| `DEEPSEEK_BASE_URL` | API åœ°å€ | å¦ | https://api.deepseek.com |
| `DEEPSEEK_TEMPERATURE` | æ¸©åº¦å‚æ•° | å¦ | 0.8 |
| `DEEPSEEK_MAX_TOKENS` | æœ€å¤§ token æ•° | å¦ | 8192 |
| `DEEPSEEK_ENABLED` | æ˜¯å¦å¯ç”¨ | å¦ | true |
| **OpenAI é…ç½®** |
| `OPENAI_API_KEY` | OpenAI API å¯†é’¥ | å¦* | - |
| `OPENAI_MODEL` | æ¨¡å‹åç§° | å¦ | gpt-4o-mini |
| `OPENAI_BASE_URL` | API åœ°å€ï¼ˆå¯é€‰ï¼‰ | å¦ | - |
| `OPENAI_TEMPERATURE` | æ¸©åº¦å‚æ•° | å¦ | 0.8 |
| `OPENAI_MAX_TOKENS` | æœ€å¤§ token æ•° | å¦ | 8192 |
| `OPENAI_ENABLED` | æ˜¯å¦å¯ç”¨ | å¦ | true |
| **é•¿æœŸè®°å¿†é…ç½® (Phase 2)** |
| `MILVUS_HOST` | Milvus ä¸»æœºåœ°å€ | å¦** | - |
| `MILVUS_PORT` | Milvus ç«¯å£ | å¦ | 19530 |
| **åº”ç”¨é…ç½®** |
| `GRADIO_PORT` | åº”ç”¨ç›‘å¬ç«¯å£ | å¦ | 8300 (Phase 2 æ›´æ–°) |
| `GRADIO_FORCE_RESTART` | è‡ªåŠ¨åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹ | å¦ | false |

\* Ollama æ˜¯é»˜è®¤æä¾›è€…ï¼Œæ— éœ€ API keyã€‚å¦‚æœæƒ³ä½¿ç”¨ DeepSeek æˆ– OpenAIï¼Œéœ€è¦é…ç½®å¯¹åº”çš„ API keyã€‚

\** å¦‚æœä¸è®¾ç½® `MILVUS_HOST`ï¼Œé•¿æœŸè®°å¿†åŠŸèƒ½å°†è¢«ç¦ç”¨ï¼Œåº”ç”¨å°†ä»¥ Phase 1 æ¨¡å¼è¿è¡Œã€‚

**å®Œæ•´é…ç½®ç¤ºä¾‹**: å‚è§ `.env.example` æ–‡ä»¶ã€‚

### LLM æä¾›è€…ä¼˜å…ˆçº§ / LLM Provider Priority

**Phase 2.5 æ›´æ–°**ï¼šç³»ç»Ÿç°åœ¨æ”¯æŒå¯é…ç½®çš„æä¾›è€…ä¼˜å…ˆçº§ã€‚

**é»˜è®¤ä¼˜å…ˆçº§**ï¼ˆä»é«˜åˆ°ä½ï¼‰:
1. **Ollama** - æœ¬åœ°è¿è¡Œï¼Œå…è´¹ï¼Œé»˜è®¤ä½¿ç”¨ GLM-4-9B æ¨¡å‹
2. **DeepSeek** - å¦‚æœé…ç½®äº† `DEEPSEEK_API_KEY`ï¼Œä½¿ç”¨ DeepSeek
3. **OpenAI** - å¦‚æœé…ç½®äº† `OPENAI_API_KEY`ï¼Œä½¿ç”¨ OpenAI

**è‡ªå®šä¹‰ä¼˜å…ˆçº§**:
```bash
# ç¤ºä¾‹ï¼šä¼˜å…ˆä½¿ç”¨ DeepSeekï¼Œç„¶å OpenAIï¼Œæœ€å Ollama
export LLM_PROVIDER_PRIORITY=deepseek,openai,ollama
```

**ç¦ç”¨æŸä¸ªæä¾›è€…**:
```bash
# ç¦ç”¨ Ollamaï¼Œåªä½¿ç”¨ API æä¾›è€…
export OLLAMA_ENABLED=false
```

**æ¨¡å‹æ¨è**:
- **Ollama æ¨èæ¨¡å‹**:
  - `unsloth/GLM-4-9B-0414-GGUF:Q8_K_XL` (é»˜è®¤ï¼Œ8B å‚æ•°ï¼Œä¸­è‹±åŒè¯­ä¼˜ç§€)
  - `llama3.1:8b-instruct-q8_0` (Llama 3.1 8B)
  - `qwen2.5:14b` (Qwen 2.5 14Bï¼Œæ›´å¼ºå¤§)

- **DeepSeek æ¨¡å‹**: `deepseek-chat` (é«˜æ€§ä»·æ¯”)

- **OpenAI æ¨¡å‹**:
  - `gpt-4o-mini` (ä¾¿å®œå¿«é€Ÿ)
  - `gpt-4o` (æ€§èƒ½æœ€ä½³)

## ğŸ“ é¡¹ç›®ç»“æ„ / Project Structure

```
LangCoach/
â”œâ”€â”€ src/                        # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ agents/                 # ä»£ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ agent_base.py       # ä»£ç†åŸºç±» (Phase 2 å¢å¼º)
â”‚   â”‚   â”œâ”€â”€ scenario_agent.py   # åœºæ™¯ä»£ç†
â”‚   â”‚   â”œâ”€â”€ vocab_agent.py      # è¯æ±‡ä»£ç†
â”‚   â”‚   â”œâ”€â”€ llm_factory.py      # LLM å·¥å‚
â”‚   â”‚   â”œâ”€â”€ long_term_memory.py # é•¿æœŸè®°å¿†ç®¡ç†å™¨ (Phase 2 æ–°å¢)
â”‚   â”‚   â”œâ”€â”€ conversation_config.py # å¯¹è¯é…ç½® (Phase 1 æ–°å¢)
â”‚   â”‚   â””â”€â”€ session_history.py  # ä¼šè¯å†å²ç®¡ç†
â”‚   â”œâ”€â”€ tabs/                   # UI æ ‡ç­¾é¡µ
â”‚   â”‚   â”œâ”€â”€ scenario_tab.py     # åœºæ™¯ç»ƒä¹ ç•Œé¢
â”‚   â”‚   â””â”€â”€ vocab_tab.py        # è¯æ±‡å­¦ä¹ ç•Œé¢
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·æ¨¡å—
â”‚   â”‚   â””â”€â”€ logger.py           # æ—¥å¿—å·¥å…·
â”‚   â””â”€â”€ main.py                 # åº”ç”¨å…¥å£
â”œâ”€â”€ content/                    # å†…å®¹èµ„æº
â”‚   â”œâ”€â”€ intro/                  # åˆå§‹æ¶ˆæ¯ï¼ˆJSONï¼‰
â”‚   â””â”€â”€ page/                   # é¡µé¢ä»‹ç»ï¼ˆMarkdownï¼‰
â”œâ”€â”€ prompts/                    # æç¤ºè¯æ–‡ä»¶
â”‚   â”œâ”€â”€ templates/              # Jinja2 æ¨¡æ¿ (Phase 1 æ–°å¢)
â”‚   â”œâ”€â”€ hotel_checkin_prompt.txt
â”‚   â”œâ”€â”€ job_interview_prompt.txt
â”‚   â”œâ”€â”€ renting_prompt.txt
â”‚   â”œâ”€â”€ salary_negotiation_prompt.txt
â”‚   â””â”€â”€ vocab_study_prompt.txt
â”œâ”€â”€ tests/                      # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ agents/                 # ä»£ç†æµ‹è¯•
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·æµ‹è¯•
â”‚   â””â”€â”€ run_tests.sh            # æµ‹è¯•è¿è¡Œè„šæœ¬
â”œâ”€â”€ scripts/                    # è„šæœ¬æ–‡ä»¶
â”œâ”€â”€ images/                     # é¡¹ç›®å›¾ç‰‡
â”œâ”€â”€ volumes/                    # Docker æ•°æ®å· (Phase 2 æ–°å¢, gitignored)
â”œâ”€â”€ docker-compose.yml          # Docker Compose é…ç½® (Phase 2 æ›´æ–°)
â”œâ”€â”€ docker-compose.dev.yml      # å¼€å‘ç¯å¢ƒé…ç½® (Phase 2 æ›´æ–°)
â”œâ”€â”€ Dockerfile                  # Docker é•œåƒæ„å»ºæ–‡ä»¶
â”œâ”€â”€ requirements.txt            # Python ä¾èµ– (Phase 2 æ–°å¢ pymilvus)
â”œâ”€â”€ .env.example                # ç¯å¢ƒå˜é‡ç¤ºä¾‹ (Phase 2 æ–°å¢)
â”œâ”€â”€ PHASE2_SETUP.md            # Phase 2 è®¾ç½®æŒ‡å— (Phase 2 æ–°å¢)
â”œâ”€â”€ PRODUCT_PLAN.md            # äº§å“å¼€å‘è®¡åˆ’
â”œâ”€â”€ LICENSE                     # è®¸å¯è¯
â””â”€â”€ README.md                   # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸ§ª å¼€å‘æŒ‡å— / Development

### è¿è¡Œæµ‹è¯• / Running Tests

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæ¨¡å—çš„æµ‹è¯•
pytest tests/agents/

# è¿è¡Œæµ‹è¯•å¹¶æŸ¥çœ‹è¦†ç›–ç‡
pytest --cov=src --cov-report=term-missing

# ç”Ÿæˆ HTML è¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=src --cov-report=html

# ä½¿ç”¨æµ‹è¯•è„šæœ¬ï¼ˆè‡ªåŠ¨æ£€æŸ¥è¦†ç›–ç‡ï¼‰
./tests/run_tests.sh
```

æ›´å¤šæµ‹è¯•ä¿¡æ¯è¯·å‚è€ƒ [tests/README.md](tests/README.md)ã€‚

### å¼€å‘ç¯å¢ƒ / Development Environment

**æœ¬åœ°çƒ­é‡è½½å¼€å‘ / Local Hot Reload**:

åº”ç”¨æ”¯æŒ Gradio çƒ­é‡è½½æ¨¡å¼ï¼Œä¿®æ”¹ä»£ç åè‡ªåŠ¨ç”Ÿæ•ˆï¼š

```bash
# ä½¿ç”¨ gradio å‘½ä»¤å¯åŠ¨ï¼ˆæ¨èï¼‰
gradio src/main.py

# æˆ–ä½¿ç”¨ --force å‚æ•°é¿å…ç«¯å£å†²çª
python src/main.py --force
```

**ä½¿ç”¨ Docker Compose å¼€å‘**:

ä½¿ç”¨å¼€å‘æ¨¡å¼çš„ Docker Compose é…ç½®ï¼Œæ”¯æŒä»£ç çƒ­é‡è½½ï¼š

```bash
docker-compose -f docker-compose.dev.yml up
```

å¼€å‘ç¯å¢ƒä¼šæŒ‚è½½æºä»£ç ç›®å½•ï¼Œä¿®æ”¹ä»£ç åè‡ªåŠ¨ç”Ÿæ•ˆã€‚

### ä»£ç è§„èŒƒ / Code Style

- éµå¾ª PEP 8 Python ä»£ç è§„èŒƒ
- ä½¿ç”¨ç±»å‹æç¤ºï¼ˆType Hintsï¼‰
- ç¼–å†™æ¸…æ™°çš„æ–‡æ¡£å­—ç¬¦ä¸²ï¼ˆDocstringsï¼‰

## ğŸ“ è®¸å¯è¯ / License

æœ¬é¡¹ç›®é‡‡ç”¨ [Apache License 2.0](LICENSE) è®¸å¯è¯ã€‚

## ğŸ“® è”ç³»æˆ‘ä»¬ / Contact

- é¡¹ç›®ä¸»é¡µ: [https://github.com/miniriceai/LangCoach](https://github.com/miniriceai/LangCoach)
- é—®é¢˜åé¦ˆ: [GitHub Issues](https://github.com/MiniriceAI/LangCoach/issues)

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª â­ Starï¼**

**If this project helps you, please give us a â­ Star!**

Made with â¤ï¸ by the LangCoach Team

</div>
